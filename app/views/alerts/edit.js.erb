$('.modal-body').html("<%= j render 'form', url: edit_alert_path(@alert) %>");
$('.modal-title').html("Edit "<%= j @alert.alert_currency %>" Alert");

$( "#slider-range" ).slider({
      range: true,
      min: 0,
      max: 100,
      step: 5,
      values: [ 25, 75 ],
      slide: function( event, ui ) {
        $( "#alert-min" ).val(ui.values[0] + "%");
        $( "#alert-max" ).val(ui.values[1] + "%");
      }
    });

    var $currentValueField = $('#alert-value');
    var url = 'https://api.coinmarketcap.com/v1/ticker/';
    function currentValue(name) {
      let currency = "<%= j @alert.alert_id %>";
      let urlToRequest = url + currency + "/";
      $.ajax({
        url: urlToRequest,
        type: 'GET',
        dataType: 'json',
        success(response) {
          $("#alert-value").val('$' + parseFloat(response[0][name]).toFixed(2));
        }
          ,error(jqXHR, status, errorThrown) {
          console.log(jqXHR);
        }
      });
    }

    function update(name) {
      $currentValueField.empty();
      currentValue(name);
      return false;
    }


    $("#alert-min" ).val($("#slider-range").slider("values",0) + '%');
    $("#alert-max").val($("#slider-range").slider("values",1) + '%');
    $("#alert-currency").val("<%= j @alert.alert_currency %>");
    $("#alert-value").val(update("price_usd"));
    $('#alert-datepicker').val("<%= @alert.alert_expiration.strftime("%A, %B %e %Y") %>")
    $('#alert-datepicker').datepicker({dateFormat: "DD, MM d, yy"});
$('.modal').modal();
    